<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1704px" preserveAspectRatio="none" style="width:1573px;height:1704px;background:#FFFFFF;" version="1.1" viewBox="0 0 1573 1704" width="1573px" zoomAndPan="magnify"><defs><filter height="300%" id="fz5plpfrbznjx" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fz5plpfrbznjx)" height="1509.8359" style="stroke:#A80036;stroke-width:1.0;" width="10" x="86" y="99.6094"/><rect fill="#FFFFFF" filter="url(#fz5plpfrbznjx)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="253" y="121.9609"/><rect fill="#FFFFFF" filter="url(#fz5plpfrbznjx)" height="1447.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="480" y="162.3125"/><rect fill="#FFFFFF" filter="url(#fz5plpfrbznjx)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="485" y="1092.5781"/><rect fill="#FFFFFF" filter="url(#fz5plpfrbznjx)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="485" y="1359.6875"/><rect fill="#FFFFFF" filter="url(#fz5plpfrbznjx)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="670" y="330.3281"/><rect fill="#FFFFFF" filter="url(#fz5plpfrbznjx)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="844" y="391.0313"/><rect fill="#FFFFFF" filter="url(#fz5plpfrbznjx)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="844" y="564.0469"/><rect fill="#FFFFFF" filter="url(#fz5plpfrbznjx)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="844" y="930.8203"/><rect fill="#FFFFFF" filter="url(#fz5plpfrbznjx)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="844" y="1291.3359"/><rect fill="#FFFFFF" filter="url(#fz5plpfrbznjx)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="844" y="1425.0391"/><rect fill="#FFFFFF" filter="url(#fz5plpfrbznjx)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1131" y="783.1563"/><rect fill="#FFFFFF" filter="url(#fz5plpfrbznjx)" height="165.6641" style="stroke:#000000;stroke-width:2.0;" width="877" x="398" y="436.3828"/><rect fill="#FFFFFF" filter="url(#fz5plpfrbznjx)" height="813.6406" style="stroke:#000000;stroke-width:2.0;" width="1540" x="19" y="686.75"/><rect fill="#FFFFFF" filter="url(#fz5plpfrbznjx)" height="287.4219" style="stroke:#000000;stroke-width:2.0;" width="1520" x="29" y="712.1016"/><rect fill="#FFFFFF" filter="url(#fz5plpfrbznjx)" height="152.4063" style="stroke:#000000;stroke-width:2.0;" width="605" x="29" y="1013.5234"/><rect fill="#FFFFFF" filter="url(#fz5plpfrbznjx)" height="313.4609" style="stroke:#000000;stroke-width:2.0;" width="918.5" x="29" y="1179.9297"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="91" x2="91" y1="89.6094" y2="1618.4453"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="258" x2="258" y1="89.6094" y2="1618.4453"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="485" x2="485" y1="163.2656" y2="1618.4453"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="674.5" x2="674.5" y1="89.6094" y2="1618.4453"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="848.5" x2="848.5" y1="89.6094" y2="1618.4453"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1001.5" x2="1001.5" y1="528.3906" y2="1618.4453"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1135.5" x2="1135.5" y1="89.6094" y2="1618.4453"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1282.5" x2="1282.5" y1="895.1641" y2="1618.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="39" y="86.5332">UserApplication</text><ellipse cx="91" cy="15" fill="#FEFECE" filter="url(#fz5plpfrbznjx)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M91,23 L91,50 M78,31 L104,31 M91,50 L78,65 M91,50 L104,65 " fill="none" filter="url(#fz5plpfrbznjx)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="39" y="1631.9785">UserApplication</text><ellipse cx="91" cy="1645.0547" fill="#FEFECE" filter="url(#fz5plpfrbznjx)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M91,1653.0547 L91,1680.0547 M78,1661.0547 L104,1661.0547 M91,1680.0547 L78,1695.0547 M91,1680.0547 L104,1695.0547 " fill="none" filter="url(#fz5plpfrbznjx)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#fz5plpfrbznjx)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="104" x="204" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="211" y="74.5332">:OrdersServer</text><rect fill="#FEFECE" filter="url(#fz5plpfrbznjx)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="104" x="204" y="1617.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="211" y="1638.9785">:OrdersServer</text><rect fill="#FEFECE" filter="url(#fz5plpfrbznjx)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="150" x="408" y="1617.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="415" y="1638.9785">:OrdersServerThread</text><rect fill="#FEFECE" filter="url(#fz5plpfrbznjx)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="147" x="599.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="606.5" y="74.5332">:CustomerRepository</text><rect fill="#FEFECE" filter="url(#fz5plpfrbznjx)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="147" x="599.5" y="1617.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="606.5" y="1638.9785">:CustomerRepository</text><rect fill="#FEFECE" filter="url(#fz5plpfrbznjx)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="173" x="760.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="159" x="767.5" y="74.5332">:ShoppingCartRepository</text><rect fill="#FEFECE" filter="url(#fz5plpfrbznjx)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="173" x="760.5" y="1617.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="159" x="767.5" y="1638.9785">:ShoppingCartRepository</text><rect fill="#FEFECE" filter="url(#fz5plpfrbznjx)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="105" x="947.5" y="1617.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="954.5" y="1638.9785">:ShoppingCart</text><rect fill="#FEFECE" filter="url(#fz5plpfrbznjx)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="135" x="1066.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121" x="1073.5" y="74.5332">:ProductRepository</text><rect fill="#FEFECE" filter="url(#fz5plpfrbznjx)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="135" x="1066.5" y="1617.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121" x="1073.5" y="1638.9785">:ProductRepository</text><rect fill="#FEFECE" filter="url(#fz5plpfrbznjx)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="131" x="1215.5" y="1617.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="1222.5" y="1638.9785">:ShoppingCartItem</text><rect fill="#FFFFFF" filter="url(#fz5plpfrbznjx)" height="1509.8359" style="stroke:#A80036;stroke-width:1.0;" width="10" x="86" y="99.6094"/><rect fill="#FFFFFF" filter="url(#fz5plpfrbznjx)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="253" y="121.9609"/><rect fill="#FFFFFF" filter="url(#fz5plpfrbznjx)" height="1447.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="480" y="162.3125"/><rect fill="#FFFFFF" filter="url(#fz5plpfrbznjx)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="485" y="1092.5781"/><rect fill="#FFFFFF" filter="url(#fz5plpfrbznjx)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="485" y="1359.6875"/><rect fill="#FFFFFF" filter="url(#fz5plpfrbznjx)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="670" y="330.3281"/><rect fill="#FFFFFF" filter="url(#fz5plpfrbznjx)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="844" y="391.0313"/><rect fill="#FFFFFF" filter="url(#fz5plpfrbznjx)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="844" y="564.0469"/><rect fill="#FFFFFF" filter="url(#fz5plpfrbznjx)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="844" y="930.8203"/><rect fill="#FFFFFF" filter="url(#fz5plpfrbznjx)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="844" y="1291.3359"/><rect fill="#FFFFFF" filter="url(#fz5plpfrbznjx)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="844" y="1425.0391"/><rect fill="#FFFFFF" filter="url(#fz5plpfrbznjx)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1131" y="783.1563"/><polygon fill="#A80036" points="241,117.9609,251,121.9609,241,125.9609,245,121.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="96" x2="247" y1="121.9609" y2="121.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="103" y="117.1045">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="114" y="117.1045">Starts communication</text><polygon fill="#A80036" points="396,148.3125,406,152.3125,396,156.3125,400,152.3125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="258" x2="402" y1="152.3125" y2="152.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="265" y="147.4561">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="276" y="147.4561">creates new thread</text><rect fill="#FEFECE" filter="url(#fz5plpfrbznjx)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="150" x="408" y="129.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="415" y="151.4941">:OrdersServerThread</text><path d="M315,181.5703 L315,207.5703 L650,207.5703 L650,191.5703 L640,181.5703 L315,181.5703 " fill="#FBFB77" filter="url(#fz5plpfrbznjx)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M640,181.5703 L640,191.5703 L650,191.5703 L640,181.5703 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="314" x="321" y="200.0654">for each client connected, a new thread will be created</text><polygon fill="#A80036" points="468,235.2734,478,239.2734,468,243.2734,472,239.2734" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="96" x2="474" y1="239.2734" y2="239.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="103" y="234.417">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176" x="114" y="234.417">sends COMM_TEST message</text><polygon fill="#A80036" points="107,265.625,97,269.625,107,273.625,103,269.625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="101" x2="479" y1="269.625" y2="269.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="113" y="264.7686">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176" x="124" y="264.7686">returns acknowledge message</text><polygon fill="#A80036" points="468,295.9766,478,299.9766,468,303.9766,472,299.9766" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="96" x2="474" y1="299.9766" y2="299.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="103" y="295.1201">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188" x="114" y="295.1201">sends CUSTOMER_ID message</text><polygon fill="#A80036" points="658,326.3281,668,330.3281,658,334.3281,662,330.3281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="490" x2="664" y1="330.3281" y2="330.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="497" y="325.4717">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="508" y="325.4717">findByEmail(email)</text><polygon fill="#A80036" points="501,356.6797,491,360.6797,501,364.6797,497,360.6797" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="495" x2="674" y1="360.6797" y2="360.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="507" y="355.8232">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="518" y="355.8232">returns Customer</text><polygon fill="#A80036" points="832,387.0313,842,391.0313,832,395.0313,836,391.0313" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="490" x2="838" y1="391.0313" y2="391.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="497" y="386.1748">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="508" y="386.1748">findByClient(client)</text><polygon fill="#A80036" points="501,417.3828,491,421.3828,501,425.3828,497,421.3828" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="495" x2="848" y1="421.3828" y2="421.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="507" y="416.5264">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="230" x="518" y="416.5264">returns Shopping cart if existent already</text><path d="M398,436.3828 L459,436.3828 L459,444.3828 L449,454.3828 L398,454.3828 L398,436.3828 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="165.6641" style="stroke:#000000;stroke-width:2.0;" width="877" x="398" y="436.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="413" y="450.8779">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="179" x="474" y="449.8018">[if shopping cart is non existent]</text><path d="M738,459.7344 L738,485.7344 L1261,485.7344 L1261,469.7344 L1251,459.7344 L738,459.7344 " fill="#FBFB77" filter="url(#fz5plpfrbznjx)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1251,459.7344 L1251,469.7344 L1261,469.7344 L1251,459.7344 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="502" x="744" y="478.2295">new client has no created shopping cart yet, so a new one is associated with the client</text><polygon fill="#A80036" points="935.5,513.4375,945.5,517.4375,935.5,521.4375,939.5,517.4375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="490" x2="941.5" y1="517.4375" y2="517.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="497" y="512.5811">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="515" y="512.5811">create(client)</text><rect fill="#FEFECE" filter="url(#fz5plpfrbznjx)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="105" x="947.5" y="495.0859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="954.5" y="516.6191">:ShoppingCart</text><polygon fill="#A80036" points="832,560.0469,842,564.0469,832,568.0469,836,564.0469" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="490" x2="838" y1="564.0469" y2="564.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="497" y="559.1904">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56" x="515" y="559.1904">save(cart)</text><path d="M358,614.0469 L358,640.0469 L607,640.0469 L607,624.0469 L597,614.0469 L358,614.0469 " fill="#FBFB77" filter="url(#fz5plpfrbznjx)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M597,614.0469 L597,624.0469 L607,624.0469 L597,614.0469 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="228" x="364" y="632.542">client has been successfully connected</text><polygon fill="#A80036" points="107,667.75,97,671.75,107,675.75,103,671.75" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="101" x2="479" y1="671.75" y2="671.75"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="113" y="666.8936">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176" x="131" y="666.8936">returns acknowledge message</text><path d="M19,686.75 L92,686.75 L92,694.75 L82,704.75 L19,704.75 L19,686.75 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="813.6406" style="stroke:#000000;stroke-width:2.0;" width="1540" x="19" y="686.75"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="34" y="701.2451">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="324" x="107" y="700.1689">[customer can add the multiple desired items to their cart]</text><path d="M29,712.1016 L90,712.1016 L90,720.1016 L80,730.1016 L29,730.1016 L29,712.1016 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="287.4219" style="stroke:#000000;stroke-width:2.0;" width="1520" x="29" y="712.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="44" y="726.5967">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="263" x="105" y="725.5205">[if customer chooses to add an item to the cart]</text><polygon fill="#A80036" points="468,748.8047,478,752.8047,468,756.8047,472,752.8047" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="96" x2="474" y1="752.8047" y2="752.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="103" y="747.9482">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="121" y="747.9482">sends CART_ADD message</text><polygon fill="#A80036" points="1119,779.1563,1129,783.1563,1119,787.1563,1123,783.1563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="490" x2="1125" y1="783.1563" y2="783.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="497" y="778.2998">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="515" y="778.2998">findById(productId)</text><polygon fill="#A80036" points="501,809.5078,491,813.5078,501,817.5078,497,813.5078" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="495" x2="1135" y1="813.5078" y2="813.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="507" y="808.6514">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="525" y="808.6514">product</text><path d="M1027,826.5078 L1027,852.5078 L1535,852.5078 L1535,836.5078 L1525,826.5078 L1027,826.5078 " fill="#FBFB77" filter="url(#fz5plpfrbznjx)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1525,826.5078 L1525,836.5078 L1535,836.5078 L1525,826.5078 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="487" x="1033" y="845.0029">both productId and quantity attributes are sent through the user application message</text><polygon fill="#A80036" points="1203.5,880.2109,1213.5,884.2109,1203.5,888.2109,1207.5,884.2109" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="490" x2="1209.5" y1="884.2109" y2="884.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="497" y="879.3545">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="515" y="879.3545">create(quantity, product)</text><rect fill="#FEFECE" filter="url(#fz5plpfrbznjx)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="131" x="1215.5" y="861.8594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="1222.5" y="883.3926">:ShoppingCartItem</text><polygon fill="#A80036" points="832,926.8203,842,930.8203,832,934.8203,836,930.8203" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="490" x2="838" y1="930.8203" y2="930.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="497" y="925.9639">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="515" y="925.9639">addItem(shoppingCartItem)</text><polygon fill="#A80036" points="837,957.1719,847,961.1719,837,965.1719,841,961.1719" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="490" x2="843" y1="961.1719" y2="961.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="497" y="956.3154">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56" x="515" y="956.3154">save(cart)</text><polygon fill="#A80036" points="107,987.5234,97,991.5234,107,995.5234,103,991.5234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="101" x2="479" y1="991.5234" y2="991.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="113" y="986.667">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176" x="131" y="986.667">returns acknowledge message</text><path d="M29,1013.5234 L90,1013.5234 L90,1021.5234 L80,1031.5234 L29,1031.5234 L29,1013.5234 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="152.4063" style="stroke:#000000;stroke-width:2.0;" width="605" x="29" y="1013.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="44" y="1028.0186">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="274" x="105" y="1026.9424">[if customer chooses to view their shopping cart]</text><polygon fill="#A80036" points="468,1050.2266,478,1054.2266,468,1058.2266,472,1054.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="96" x2="474" y1="1054.2266" y2="1054.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="103" y="1049.3701">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="121" y="1049.3701">sends SHOPCART message</text><line style="stroke:#A80036;stroke-width:1.0;" x1="495" x2="537" y1="1084.5781" y2="1084.5781"/><line style="stroke:#A80036;stroke-width:1.0;" x1="537" x2="537" y1="1084.5781" y2="1097.5781"/><line style="stroke:#A80036;stroke-width:1.0;" x1="496" x2="537" y1="1097.5781" y2="1097.5781"/><polygon fill="#A80036" points="506,1093.5781,496,1097.5781,506,1101.5781,502,1097.5781" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="502" y="1079.7217">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="520" y="1079.7217">cart.getItemList();</text><polygon fill="#A80036" points="107,1153.9297,97,1157.9297,107,1161.9297,103,1157.9297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="101" x2="479" y1="1157.9297" y2="1157.9297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="113" y="1153.0732">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="226" x="131" y="1153.0732">returns shopping cart through message</text><path d="M29,1179.9297 L90,1179.9297 L90,1187.9297 L80,1197.9297 L29,1197.9297 L29,1179.9297 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="313.4609" style="stroke:#000000;stroke-width:2.0;" width="918.5" x="29" y="1179.9297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="44" y="1194.4248">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="374" x="105" y="1193.3486">[if customer chooses to remove products from their shopping cart]</text><polygon fill="#A80036" points="468,1216.6328,478,1220.6328,468,1224.6328,472,1220.6328" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="96" x2="474" y1="1220.6328" y2="1220.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="103" y="1215.7764">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194" x="121" y="1215.7764">sends CART_REMOVE message</text><path d="M263,1233.6328 L263,1259.6328 L703,1259.6328 L703,1243.6328 L693,1233.6328 L263,1233.6328 " fill="#FBFB77" filter="url(#fz5plpfrbznjx)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M693,1233.6328 L693,1243.6328 L703,1243.6328 L693,1233.6328 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="419" x="269" y="1252.1279">productId to be removed is passed through the UserApplication message</text><polygon fill="#A80036" points="832,1287.3359,842,1291.3359,832,1295.3359,836,1291.3359" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="490" x2="838" y1="1291.3359" y2="1291.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="497" y="1286.4795">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219" x="515" y="1286.4795">removedItem = findCartItem(productId)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="495" x2="537" y1="1351.6875" y2="1351.6875"/><line style="stroke:#A80036;stroke-width:1.0;" x1="537" x2="537" y1="1351.6875" y2="1364.6875"/><line style="stroke:#A80036;stroke-width:1.0;" x1="496" x2="537" y1="1364.6875" y2="1364.6875"/><polygon fill="#A80036" points="506,1360.6875,496,1364.6875,506,1368.6875,502,1364.6875" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="502" y="1346.8311">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="520" y="1346.8311">cart.remove(removedItem)</text><polygon fill="#A80036" points="832,1421.0391,842,1425.0391,832,1429.0391,836,1425.0391" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="490" x2="838" y1="1425.0391" y2="1425.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="497" y="1420.1826">26</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56" x="515" y="1420.1826">save(cart)</text><polygon fill="#A80036" points="107,1481.3906,97,1485.3906,107,1489.3906,103,1485.3906" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="101" x2="479" y1="1485.3906" y2="1485.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="113" y="1480.5342">27</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176" x="131" y="1480.5342">returns acknowledge message</text><path d="M5,1512.3906 L5,1538.3906 L174,1538.3906 L174,1522.3906 L164,1512.3906 L5,1512.3906 " fill="#FBFB77" filter="url(#fz5plpfrbznjx)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M164,1512.3906 L164,1522.3906 L174,1522.3906 L164,1512.3906 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="11" y="1530.8857">once customer is finished</text><polygon fill="#A80036" points="468,1566.0938,478,1570.0938,468,1574.0938,472,1570.0938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="96" x2="474" y1="1570.0938" y2="1570.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="103" y="1565.2373">28</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="121" y="1565.2373">sends DISCONN message</text><polygon fill="#A80036" points="107,1596.4453,97,1600.4453,107,1604.4453,103,1600.4453" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="101" x2="479" y1="1600.4453" y2="1600.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="113" y="1595.5889">29</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="313" x="131" y="1595.5889">returns acknowledge message and disconnects server</text><!--MD5=[cf77d7c9c88e26f50afe18eab0aee9ab]
@startuml
autonumber
actor UserApplication as T
activate T
T -> ":OrdersServer" : Starts communication
activate ":OrdersServer"
create ":OrdersServerThread"
":OrdersServer" - -> ":OrdersServerThread" :creates new thread
note over ":OrdersServerThread" : for each client connected, a new thread will be created
deactivate ":OrdersServer"
activate ":OrdersServerThread"
T -> ":OrdersServerThread" : sends COMM_TEST message
":OrdersServerThread" - -> T : returns acknowledge message
T -> ":OrdersServerThread" : sends CUSTOMER_ID message
":OrdersServerThread" -> ":CustomerRepository" : findByEmail(email)
activate ":CustomerRepository"
":OrdersServerThread" <- - ":CustomerRepository" : returns Customer
deactivate ":CustomerRepository"
":OrdersServerThread" -> ":ShoppingCartRepository" : findByClient(client)
activate ":ShoppingCartRepository"
":OrdersServerThread" <- - ":ShoppingCartRepository" : returns Shopping cart if existent already
deactivate ":ShoppingCartRepository"
alt if shopping cart is non existent
create ":ShoppingCart"
note over ":ShoppingCart" : new client has no created shopping cart yet, so a new one is associated with the client
":OrdersServerThread" -> ":ShoppingCart" : create(client)
":OrdersServerThread" -> ":ShoppingCartRepository" : save(cart)
activate ":ShoppingCartRepository"
deactivate ":ShoppingCartRepository"
end
note over ":OrdersServerThread" : client has been successfully connected
":OrdersServerThread" - -> T : returns acknowledge message
loop customer can add the multiple desired items to their cart
alt if customer chooses to add an item to the cart
T -> ":OrdersServerThread" : sends CART_ADD message
":OrdersServerThread" -> ":ProductRepository" : findById(productId)
activate ":ProductRepository"
":OrdersServerThread" <- -":ProductRepository" : product
deactivate ":ProductRepository"
create ":ShoppingCartItem"
note over ":ShoppingCartItem" : both productId and quantity attributes are sent through the user application message
":OrdersServerThread" -> ":ShoppingCartItem" : create(quantity, product)
":OrdersServerThread" -> ":ShoppingCartRepository" : addItem(shoppingCartItem)
activate ":ShoppingCartRepository"
":OrdersServerThread" -> ":ShoppingCartRepository" : save(cart)
deactivate ":ShoppingCartRepository"
":OrdersServerThread" - -> T : returns acknowledge message
end
alt if customer chooses to view their shopping cart
T -> ":OrdersServerThread" : sends SHOPCART message
":OrdersServerThread" -> ":OrdersServerThread" : cart.getItemList();
activate ":OrdersServerThread"
deactivate ":OrdersServerThread"
":OrdersServerThread" - -> T : returns shopping cart through message
end
alt if customer chooses to remove products from their shopping cart
T -> ":OrdersServerThread" : sends CART_REMOVE message
note over ":OrdersServerThread" : productId to be removed is passed through the UserApplication message
":OrdersServerThread" -> ":ShoppingCartRepository" : removedItem = findCartItem(productId)
activate ":ShoppingCartRepository"
deactivate ":ShoppingCartRepository"
":OrdersServerThread" -> ":OrdersServerThread" : cart.remove(removedItem)
activate ":OrdersServerThread"
deactivate ":OrdersServerThread"
":OrdersServerThread" -> ":ShoppingCartRepository" : save(cart)
activate ":ShoppingCartRepository"
deactivate ":ShoppingCartRepository"
":OrdersServerThread" - -> T : returns acknowledge message
end
end
note over T : once customer is finished
T -> ":OrdersServerThread" : sends DISCONN message
":OrdersServerThread" - -> T : returns acknowledge message and disconnects server

@enduml

PlantUML version 1.2021.11(Sat Oct 02 14:26:11 BST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>